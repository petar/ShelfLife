<!doctype html>
<!--[if lt IE 7 ]><html lang="en" class="no-js ie6"><![endif]-->
<!--[if (gt IE 6)|!(IE)]><!--><html lang="en" class="no-js"><!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

    <title>Sociability documentation</title>
    <meta name="description" content="Sociability dcumentation">
    <meta name="author" content="Petar Maymounkov">

    <link href="screen.css" media="screen, projection" rel="stylesheet" type="text/css" />
</head>

<body>
	<div class="content">
		<h2>Integration</h2>
		<p>Integrating Sociability in your exisiting web infrastructure takes two steps.
		Since Sociability has its own API server for AJAX calls which also sets cookies,
		first you need to configure your server infrastructure to re-direct API requests to the
		Sociability server. Second, you will have to add a few lines to your existing
		web pages in order to enable the various features.
		</p>
		<h3>Configuring your server</h3>

		<p>The Sociability server serves HTTP API calls under the URL <code>/api/</code> and
		some static resources (like style sheets and UI templates) under the URL
		<code>/s/</code>. The client-side JavaScript of Sociability (the script
		<code>/s/js/ss.js</code>) makes various AJAX calls to the API in order to
		perform its duties.
		</p>

		<p>Let's say that your web pages are served under the hostname
		<code>dpla.gov</code>. For security considerations (to prevent Cross-site Scripting
		Attacks), browsers don't allow
		AJAX calls going to domains other than the domain where the web page came from
		(in this case <code>dpla.gov</code>). This is why, even though the Sociability
		server may run on a separate machine, your web server (perhaps something like Apache) 
		or your front HTTP reverse proxy (perhaps something like NGINX) should be configured
		to forward all requests to URLS of the form <code>dpla.gov/api/...</code> and
		<code>dpla.gov/s/...</code> to the host that runs the Sociability server.
		Exactly how this is done depends on what software you are using.
		</p>

		<h3>Inserting sociability in your pages</h3>

		<p>
		Making your pages sociable involves a few easy steps. You would have to include the
		Sociability stylesheet as well as a few JavaScript libraries. Beyond this, you
		can drop in Sociability UI components via short JavaScript calls. We'll cover all
		these in detail next.
		</p>

		<p>
		In the <code>&lt;head&gt;</code> section, include the stylesheets that "dress" the 
		Sociability UI components:
		</p>
<pre>
  &lt;link href="/s/vanilla-style/stylesheets/sociability.css" 
      rel="stylesheet" type="text/css" /&gt;
</pre>
		<p>We've made a best effort to make sure that these stylesheets do not mess with
		the rest of your content.</p>

		<p>Next, you will include the needed JS libraries. It is a good practice to include
		JS scripts at the end of your pages, just before the closing tag
		<code>&lt;/body</code>, however you can also include these following lines in the
		<code>&lt;head&gt;</code> section if you prefer:
		</p>
<pre>
  &lt;script type="text/javascript" src="/s/js/x/jquery.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="/s/js/x/underscore.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="/s/js/x/jquery.tmpl.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="/s/js/x/json2.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="/s/js/x/backbone.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="/s/js/ss.js"&gt;&lt;/script&gt;
</pre>
	<p>
	Note that the main sociability script <code>/s/js/ss.js</code> depends on a few
	standard libraries, included before it. If you already include any of these libraries,
	you can skip the corresponding line (above). You will notice that all external libraries
	used by Sociability are served by the Sociability server (for speed and version
	compatibility).
	</p>

	<h3>Using Sociability</h3>

	<p>Now you are ready to start using Sociability and insert Sociability UI components 
	in your page. For example, the following JS snippet inserts the User Authentication Bar
	at the top of your page (much like the user bar on top of Google+):
<pre>
&lt;script type="text/javascript"&gt;
	initSociability(function() {
		ss.ui.showUserBar($("body"));
	}, function() { console.log("Problem initializing Sociability.") });
&lt;/script&gt;
</pre>
	<p>To start using Sociability, you need to make a call to <code>initSociability</code>.
	This function initializes the framework. Since initialization involves fetching various
	resources (like UI templates) from the server, <code>initSociability</code> notifies you
	asynchronously when it is ready. It takes two parameters, the first one is callback
	for the event of success, and the second one is a callback for the event of failure.
	Currently, neither callback receives any arguments.
	</p>

	<p>Once the framework is initialized, the example above inserts the User Bar by making a
	function call to <code>ss.ui.showUserBar</code>. This function takes a single parameter,
	which is the DOM element where the User Bar will be inserted.
	</p>

	<p>With this code alone, you have attached the entire user tracking and authentication
	functionality to your web pages.
	</p>

	</div>
</body>
</html>
